<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Snake Game</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background-color: #f0f0f0;
    }

    .game-container {
      position: relative;
      width: 300px;
      height: 300px;
      border: 2px solid #333;
    }

    .snake, .food {
      position: absolute;
      width: 20px;
      height: 20px;
    }

    .snake {
      background-color: #333;
    }

    .food {
      background-color: red;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <div class="snake" id="snake"></div>
    <div class="food" id="food"></div>
  </div>
  <script>
    const gameContainer = document.querySelector('.game-container');
    const snakeElement = document.getElementById('snake');
    const foodElement = document.getElementById('food');

    let snake = [{ x: 10, y: 10 }];
    let food = getRandomFoodPosition();
    let direction = { x: 0, y: 0 };
    let newSegments = 0;
    let speed = 5;
    let intervalTime = 1000 / speed;
    let interval = setInterval(moveSnake, intervalTime);

    document.addEventListener('keydown', changeDirection);

    function moveSnake() {
      const head = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };
      snake.unshift(head);

      if (snake[0].x === food.x && snake[0].y === food.y) {
        newSegments += 1;
        updateFood();
      }

      if (newSegments === 0) {
        snake.pop();
      } else {
        newSegments -= 1;
      }

      updateSnake();
      checkCollision();
    }

    function updateSnake() {
      snakeElement.innerHTML = '';
      snake.forEach(segment => {
        const segmentElement = document.createElement('div');
        segmentElement.style.gridRowStart = segment.y;
        segmentElement.style.gridColumnStart = segment.x;
        segmentElement.classList.add('snake');
        snakeElement.appendChild(segmentElement);
      });
    }

    function changeDirection(event) {
      const arrowKeys = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'];
      const keyPressed = event.key;

      if (arrowKeys.includes(keyPressed)) {
        event.preventDefault();

        switch (keyPressed) {
          case 'ArrowUp':
            if (direction.y !== 1) {
              direction = { x: 0, y: -1 };
            }
            break;
          case 'ArrowDown':
            if (direction.y !== -1) {
              direction = { x: 0, y: 1 };
            }
            break;
          case 'ArrowLeft':
            if (direction.x !== 1) {
              direction = { x: -1, y: 0 };
            }
            break;
          case 'ArrowRight':
            if (direction.x !== -1) {
              direction = { x: 1, y: 0 };
            }
            break;
        }
      }
    }

    function updateFood() {
      food = getRandomFoodPosition();
      const foodElement = document.getElementById('food');
      foodElement.style.gridRowStart = food.y;
      foodElement.style.gridColumnStart = food.x;
    }

    function getRandomFoodPosition() {
      return {
        x: Math.floor(Math.random() * 20) + 1,
        y: Math.floor(Math.random() * 20) + 1
      };
    }

    function checkCollision() {
      if (snake[0].x < 1 || snake[0].x > 20 || snake[0].y < 1 || snake[0].y > 20) {
        clearInterval(interval);
        alert('Game Over! Press OK to restart.');
        resetGame();
      }

      for (let i = 1; i < snake.length; i++) {
        if (snake[i].x === snake[0].x && snake[i].y === snake[0].y) {
          clearInterval(interval);
          alert('Game Over! Press OK to restart.');
          resetGame();
        }
      }
    }

    function resetGame() {
      snake = [{ x: 10, y: 10 }];
      direction = { x: 0, y: 0 };
      newSegments = 0;
      food = getRandomFoodPosition();
      intervalTime = 1000 / speed;
      interval = setInterval(moveSnake, intervalTime);
    }
  </script>
</body>
</html>
